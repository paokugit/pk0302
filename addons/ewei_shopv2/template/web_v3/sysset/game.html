{template '_header'}

<div class="page-header">
    当前位置：<span class="text-primary">幸运抽奖</span>
</div>
<style>
    .game{
        margin-top: 6px;
        width: 100%;
        height: 36px;
    }
    .game .form-control{
        width: 32%;
        margin-left: 3%;
        float: left
    }
    .game .add{
        float: left;
        line-height: 28px;
        font-size: 15px;
        margin-left: 3%;
        border: 1px solid #44b525;
        width: 48px;
        height: 28px;
        text-align: center;
        border-radius: 66px;
        background: #44b525;
    }
    .game .delete{
        float: left;
        line-height: 28px;
        font-size: 15px;
        margin-left: 3%;
        border: 1px solid #44b525;
        width: 48px;
        height: 28px;
        text-align: center;
        border-radius: 66px;
        background: #44b525;
    }
</style>
<div class="page-content">
    <div class="alert alert-primary">
        <p>提示：设计幸运抽奖的奖项，奖励和获奖比例</p>
    </div>
    <label style="margin-left: 55px;width: 100px;text-align: center">奖项等级</label>
    <label style="margin-left: 68px;width: 100px;text-align: center">奖励奖品</label>
    <label style="margin-left: 130px;width: 100px;text-align: center">奖励比例</label>
    <label style="margin-left: 76px;width: 100px;text-align: center">操&nbsp;&nbsp;作</label>
    <form action="" method="post" class="form-horizontal form-validate" enctype="multipart/form-data">
        {if count($data) == 0}
            <div class="game">
                <label class="col-lg control-label">奖项&nbsp;&nbsp;&nbsp;(1)</label>
                <div class="col-sm-9 col-xs-12">
                    <input type="text" name="1[reward1]" class="form-control" value="">
                    <input type="text" name="1[rate1]" class="form-control" value="">
                    <span class="add" onclick="add(1)">添加</span>
                    <span class="delete" onclick="del(1)">删除</span>
                </div>
            </div>
        {/if}
        {loop $data $key=>$item}
            <div class="game">
                <label class="col-lg control-label">奖项&nbsp;&nbsp;&nbsp;({php echo $key+1})</label>
                <div class="col-sm-9 col-xs-12">
                    <input type="text" name="{php echo $key+1}[reward{php echo $key+1}]" class="form-control" value="{php echo $item['reward']}">
                    <input type="text" name="{php echo $key+1}[rate{php echo $key+1}]" class="form-control" value="{php echo $item['rate']}">
                    {if $key+1 == count($data)}
                        <span class="add" onclick="add({php echo $key+1})">添加</span>
                        <span class="delete" onclick="del({php echo $key+1})">删除</span>
                    {/if}
                </div>
            </div>
        {/loop}
        <div class="form-group">
            <label class="col-lg control-label"></label>
            <div class="col-sm-9 col-xs-12">
                <input type="submit" value="提交" class="btn btn-primary" style="margin-top: 36px;margin-left: 16px"/>
            </div>
        </div>
    </form>
</div>
{template '_footer'}     

<script>
   // $('#add').click(function () {
   //
   // });
    function add(num) {
        if(num >= 9){
            alert("最多9条奖励奖品");return;
        }
        num+=1
        var add = $(".add");
        $(".delete").remove();
        $(".add").parent().parent().after('<div class="game"> ' +
                                            '<label class="col-lg control-label">奖项&nbsp;&nbsp;&nbsp;('+num+')</label> ' +
                                            '<div class="col-sm-9 col-xs-12"> ' +
                                                '<input type="text" name="'+num+'[reward'+num+']" class="form-control" value=""> ' +
                                                '<input type="text" name="'+num+'[rate'+num+']" class="form-control" value=""> ' +
                                                '<span class="add" onclick="add('+num+')">添加</span> ' +
                                                '<span class="delete" onclick="del('+num+')">删除</span> ' +
                                            '</div> ' +
                                        '</div>');
        add.remove();
    }
    //$('#delete').onlick(function () {
   //
   // })
   function del(num){
        if(num == 1){
            alert("最少保留一条奖励");return;
        }
        var del = $('.delete');
        num-=1;
        $(".delete").parent().parent().prev().find("input:eq(1)").after('<span class="add" onclick="add('+num+')">添加</span> ' +
                                                                        '<span class="delete" onclick="del('+num+')">删除</span> ');
        del.parent().parent().remove();
    }
</script>